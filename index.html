<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduQuest: Master Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="notification-area"></div>

<div class="app-container">
    <header class="panel">
        <div><h1 class="game-title">Web de juegos</h1></div>
        <div style="text-align:right">
            <div class="coin-display">ü™ô <span id="uiCoins">0</span></div>
            <select id="gradeSelect" onchange="changeGrade()">
                <option value="inicial">Nivel: Inicial</option>
                <option value="intermedia">Nivel: Intermedia</option>
                <option value="dificil">Nivel: Dif√≠cil</option>
                <option value="experta">Nivel: Experta</option>
                <option value="prodigio">Nivel: üåü Prodigio</option>
            </select>
        </div>  
    </header>

    <aside>
        <div class="panel center-content">
            <h3>Jugador</h3>
            <input type="text" id="usernameInput" placeholder="Tu Nombre" maxlength="10" onchange="updateUsername(this.value)">
            
            <div class="avatar-container">
                <div class="mc-head mc-part" id="avHead"><div class="mc-eyes"><div class="eye"><div class="pupil"></div></div><div class="eye"><div class="pupil"></div></div></div></div>
                <div class="mc-body-row"><div class="mc-arm mc-part" id="avArmL"></div><div class="mc-torso mc-part" id="avTorso"></div><div class="mc-arm mc-part" id="avArmR"></div></div>
                <div class="mc-legs-row"><div class="mc-leg mc-part" id="avLegL"></div><div class="mc-leg mc-part" id="avLegR"></div></div>
            </div>
            
            <div class="menu-buttons">
                <button class="mc-btn blue" onclick="showDashboard()">üó∫Ô∏è MUNDOS</button>
                <button class="mc-btn green" onclick="showShop()">üõçÔ∏è TIENDA</button>
            </div>
            
            <div class="admin-zone">
                <div class="admin-tag" onclick="openAdminLogin()">Administrador</div>
                <button class="mc-btn red small-btn" onclick="resetGame()">‚ö†Ô∏è BORRAR DATOS</button>
            </div>
        </div>
    </aside>

    <main class="panel">
        <div id="view-dashboard">
            <h3 style="margin-top:0;">Elige tu Aventura</h3>
            <div class="subject-grid">
                <button class="mc-btn blue big-btn" onclick="openSubject('matematica')">
                    <div class="emoji">üßÆ</div>Matem√°tica<br><br><small>Nivel <span id="lbl-matematica">1</span></small>
                </button>
                <button class="mc-btn green big-btn" onclick="openSubject('compu')">
                    <div class="emoji">ü§ñ</div>Computaci√≥n<br><br><small>Nivel <span id="lbl-logic">1</span></small>
                </button>
                <button class="mc-btn red big-btn" onclick="openSubject('teclado')">
                    <div class="emoji">‚å®Ô∏è</div>Teclado<br><br><small>Nivel <span id="lbl-typing">1</span></small>
                </button>
                <button class="mc-btn purple big-btn" onclick="openSubject('ingles')">
                    <div class="emoji">üó£Ô∏è</div>Ingles<br><br><small>Nivel <span id="lbl-ingles">1</span></small>
                </button>
                <button class="mc-btn pink big-btn" onclick="openSubject('Geografia')">
                    <div class="emoji">üåç</div>Geograf√≠a<br><br><small>Nivel <span id="lbl-geografia">1</span></small>
                </button>
                <button class="mc-btn orange big-btn" onclick="openSubject('Algoritmos')">
                    <div class="emoji">üß©</div>L√≥gica<br><br><small>Nivel <span id="lbl-algoritmos">1</span></small>
                </button>
                <button class="mc-btn blue-dark big-btn" onclick="openSubject('python')">
                    <div class="emoji">üêç</div>Python<br><br><small>Nivel <span id="lbl-python">1</span></small>
                </button>
                <button class="mc-btn cyan big-btn" onclick="openSubject('claves')">
                    <div class="emoji">üîê</div>Claves<br><br><small>Herramienta</small>
                </button>
            </div>
        </div>
        
        <div id="view-map" style="display:none;">
            <div class="map-header">
                <h3 id="mapTitle" style="margin:0;">Juegos</h3>
                <button class="mc-btn gray auto-width" onclick="showDashboard()">‚Üê Volver</button>
            </div>
            <div class="level-grid" id="mapGrid"></div>
        </div>
        
        <div id="view-shop" style="display:none;">
            <div class="map-header">
                <h3 style="margin:0;">Tienda</h3>
                <button class="mc-btn gray auto-width" onclick="showDashboard()">‚Üê Salir</button>
            </div>
            <div class="subject-grid" id="shopGrid"></div>
        </div>
    </main>

    <aside>
        <div class="panel padding-10">
            <h3 class="gold-title">üèÜ GLOBAL TOP 10</h3>
            <div class="leaderboard-list" id="leaderboardList">
                <div style="text-align:center; padding:20px;">Cargando...</div>
            </div>
        </div>
    </aside>
</div>

<div class="overlay" id="gameModal" style="display:none;">
    <div class="modal-box">
        <h3 id="gameTitle" style="color:#0277bd;">Nivel 1</h3>
        <div id="gameContent" style="margin:30px 0;"></div>
        <button class="mc-btn red" onclick="closeGame()">Salir</button>
    </div>
</div>

<div class="overlay" id="adminLoginModal" style="display:none;">
    <div class="modal-box small-modal">
        <h3>Zona Admin</h3>
        <input type="text" id="adminUser" placeholder="Usuario">
        <input type="password" id="adminPass" placeholder="Contrase√±a">
        <div class="row-flex">
            <button class="mc-btn green" onclick="checkAdmin()">Entrar</button>
            <button class="mc-btn gray" onclick="document.getElementById('adminLoginModal').style.display='none'">Cerrar</button>
        </div>
    </div>
</div>

<div class="overlay" id="adminPanelModal" style="display:none;">
    <div class="modal-box wide-modal">
        <h3>üõ†Ô∏è Panel Creador</h3>
        
        <div class="admin-section yellow-bg">
            <h4>üèÜ Agregar al Ranking</h4>
            <input type="text" id="manualName" placeholder="Nombre Jugador">
            <input type="number" id="manualCoins" placeholder="Monedas">
            <button class="mc-btn orange" onclick="adminAddManualPlayer()">Inyectar</button>
        </div>

        <div class="admin-section gray-bg">
            <h4>Nuevo Item</h4>
            <input type="text" id="admItemName" placeholder="Nombre">
            <input type="number" id="admPrice" placeholder="Precio">
            <select id="admType">
                <option value="head">Cabeza</option>
                <option value="torso">Torso</option>
                <option value="legs">Piernas</option>
                <option value="arm">Brazos</option>
            </select>
            <input type="text" id="admTexture" placeholder="URL Imagen o Color Hex">
            <button class="mc-btn green" onclick="adminAddItem()">Crear</button>
        </div>
        
        <div class="admin-section gray-bg">
            <h4>Nuevo Nivel (Trivia)</h4>
            <select id="admSubj">
                <option value="matematica">Matem√°tica</option>
                <option value="compu">Computaci√≥n</option>
                <option value="ingles">Ingles</option>
                <option value="teclado">Teclado</option>
            </select>
            <select id="admGrade">
                <option value="inicial">Inicial</option>
                <option value="intermedia">Intermedia</option>
                <option value="dificil">Dif√≠cil</option>
                <option value="experta">Experta</option>
                <option value="prodigio">Prodigio</option>
            </select> 
            <input type="number" id="admLvlNum" placeholder="Nivel">
            <input type="text" id="admQ" placeholder="Pregunta">
            <input type="text" id="admAns" placeholder="Respuesta Correcta">
            <input type="text" id="admOpts" placeholder="Opciones (sep. coma)">
            <button class="mc-btn blue" onclick="adminAddLevel()">Guardar Nivel</button>
        </div>

        <button class="mc-btn gray full-width" onclick="closeAdmin()">Cerrar Panel</button>
    </div>
</div>

<script src="script.js"></script>

<h5 class="footer-credit">Juego Educativo &copy; 2025</h5>

</body>
</html>